(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3323],{2964:(e,t,a)=>{"use strict";a.d(t,{AD:()=>n,Kw:()=>c,LG:()=>m,default:()=>u,gq:()=>i,jG:()=>d});var s=a(95155),l=a(68321);async function r(e){let t=new TextEncoder().encode(e.toLowerCase().trim());return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function n(e){if(!window.ttq)return;let t={};e.email&&(t.email=await r(e.email)),e.phone_number&&(t.phone_number=await r(e.phone_number)),e.external_id&&(t.external_id=await r(e.external_id)),window.ttq.identify(t)}function o(e,t,a){window.ttq&&window.ttq.track(e,t,a)}function i(e){o("ViewContent",{contents:[{content_id:e.content_id,content_type:"product",content_name:e.content_name,brand:e.brand||"PrayerSong"}],value:e.value,currency:e.currency||"USD"},e.event_id?{event_id:e.event_id}:void 0)}function c(e){o("AddToCart",{contents:[{content_id:e.content_id,content_type:"product",content_name:e.content_name,brand:e.brand||"PrayerSong"}],value:e.value,currency:e.currency||"USD"},e.event_id?{event_id:e.event_id}:void 0)}function d(e){o("InitiateCheckout",{contents:[{content_id:e.content_id,content_type:"product",content_name:e.content_name,brand:e.brand||"PrayerSong"}],value:e.value,currency:e.currency||"USD"},e.event_id?{event_id:e.event_id}:void 0)}function m(e){o("Purchase",{contents:[{content_id:e.content_id,content_type:"product",content_name:e.content_name,price:e.price,brand:e.brand||"PrayerSong"}],value:e.value,currency:e.currency||"USD"},e.event_id?{event_id:e.event_id}:void 0)}function u(){return(0,s.jsx)(l.default,{id:"tiktok-pixel",strategy:"afterInteractive",children:'\n        !function (w, d, t) {\n          w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(\n          var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var r="https://analytics.tiktok.com/i18n/pixel/events.js",o=n&&n.partner;ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=r,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};n=document.createElement("script")\n          ;n.type="text/javascript",n.async=!0,n.src=r+"?sdkid="+e+"&lib="+t;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)};\n\n          ttq.load(\'D5IG2ARC77U2LQ3IOE0G\');\n          ttq.page();\n        }(window, document, \'ttq\');\n      '})}},22193:(e,t,a)=>{"use strict";a.d(t,{default:()=>d,gm:()=>i,sx:()=>c});var s=a(12115),l=a(20063),r=a(5953);let n=e=>{var t;let a="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===a.length&&(null==(t=a.pop())?void 0:t.split(";").shift())||null},o=r.N.load({writeKey:"a1872c90311c064217b7"}),i=(e,t)=>{o&&o.identify(e,t)},c=(e,t)=>{o&&o.track(e,t)};function d(){let e=(0,l.usePathname)();return(0,s.useEffect)(()=>{if(o&&e){let e=n("_fbp"),t=n("_fbc");o.page({fbp:e,fbc:t})}},[e]),null}},25016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var s=a(2821),l=a(75889);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,s.$)(t))}},33016:(e,t,a)=>{"use strict";function s(e){var t;if("undefined"==typeof document)return;let a="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===a.length)return null==(t=a.pop())?void 0:t.split(";").shift()}a.d(t,{R:()=>s})},41873:(e,t,a)=>{"use strict";a.d(t,{I:()=>o,PostHogProvider:()=>c,u:()=>i});var s=a(95155),l=a(12115),r=a(26614),n=a(26302);let o=(e,t)=>{r.Ay&&r.Ay.identify(e,t)},i=(e,t)=>{try{r.Ay&&r.Ay.capture(e,t)}catch(t){console.error("[PostHog] Failed to capture event:",e,t)}};function c(e){let{children:t}=e;return(0,l.useEffect)(()=>{r.Ay.init("phc_Wj8phVeS0LV44ldk4XbICvnoS2OwSEQ3OnqmRqeZ75H",{api_host:"/ingest",ui_host:"https://us.posthog.com",person_profiles:"always",defaults:"2025-05-24",capture_exceptions:!0,loaded:e=>{}})},[]),(0,s.jsx)(n.so,{client:r.Ay,children:t})}},54679:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>d,L3:()=>m,ii:()=>u,lG:()=>o});var s=a(95155),l=a(12115),r=a(58501),n=a(25016);let o=r.bL;r.l9;let i=r.ZL,c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/40 backdrop-blur-sm transition-all",a),...l})});c.displayName=r.hJ.displayName;let d=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,s.jsxs)(i,{children:[(0,s.jsx)(c,{}),(0,s.jsx)(r.UC,{ref:t,className:(0,n.cn)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 sm:rounded-lg",a),...o,children:l})]})});d.displayName=r.UC.displayName;let m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hE,{ref:t,className:(0,n.cn)("text-lg font-bold text-blue-900",a),...l})});m.displayName=r.hE.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex justify-end gap-2 mt-2",t),...a})}},59226:(e,t,a)=>{Promise.resolve().then(a.bind(a,87576))},87576:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var s=a(95155),l=a(12115),r=a(52619),n=a.n(r),o=a(83457),i=a(43586),c=a(13550),d=a(60709),m=a(65229),u=a(42529),h=a(18514),p=a(39347),f=a(35626),b=a(52987),g=a(20063),x=a(94511),y=a(12973),v=a(74879),w=a(33016),j=a(22193),N=a(41873),_=a(2964),S=a(54679);let k=e=>{if(e)return e.map(e=>e.toLowerCase())},A=(e,t,a,s)=>{let l=k(t);if((e=>null==e||""===e)(e)||!l||0===l.length)return null;let r=null!=a?a:W,n=1/0,o=null;for(let t of l){if(e===t)return e;let a=r(e,t);a<n&&(n=a,o=t)}return n<=s&&null!==o?o:null},W=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!e||0===e.length)return t?t.length:0;if(!t||0===t.length)return e.length;let s=e.length,l=t.length,r=0,n=0,o=0,i=0,c=0,d=[];for(;r<s&&n<l;){if(e.charAt(r)===t.charAt(n)){i++;let e=!1,t=0;for(;t<d.length;){let a=d[t];if(r<=a.c1||n<=a.c2){(e=Math.abs(n-r)>=Math.abs(a.c2-a.c1))?c++:!a.trans&&(a.trans=!0,c++);break}r>a.c2&&n>a.c1?d.splice(t,1):t++}d.push({c1:r,c2:n,trans:e})}else{o+=i,i=0,r!==n&&(r=n=Math.min(r,n));for(let o=0;o<a&&(r+o<s||n+o<l);o++){if(r+o<s&&e.charAt(r+o)===t.charAt(n)){r+=o-1,n--;break}if(n+o<l&&e.charAt(r)===t.charAt(n+o)){r--,n+=o-1;break}}}r++,n++,(r>=s||n>=l)&&(o+=i,i=0,r=n=Math.min(r,n))}return Math.round(Math.max(s,l)-(o+=i)+c)},P={defaultDomains:["msn.com","bellsouth.net","telus.net","comcast.net","optusnet.com.au","earthlink.net","qq.com","sky.com","icloud.com","mac.com","sympatico.ca","googlemail.com","att.net","xtra.co.nz","web.de","cox.net","gmail.com","ymail.com","aim.com","rogers.com","verizon.net","rocketmail.com","google.com","optonline.net","sbcglobal.net","aol.com","me.com","btinternet.com","charter.net","shaw.ca"],defaultSecondLevelDomains:["yahoo","hotmail","live","outlook","gmx"],defaultTopLevelDomains:["com","de","fr","it","ru","net","org","edu","gov","jp","nl","kr","se","eu","ie","us","at","be","dk","hk","es","gr","net","info","biz","mil","sg","hu","uk"],suggest:(e,t,a,s,l)=>{let r=(e=>{if("string"!=typeof e)return null;let t=e.replace(/^\s*/,"").replace(/\s*$/,"").split("@");if(t.length<2)return null;for(let e of t)if(""===e)return null;let a=t.pop(),s=a.split(".");if(0===s.length)return null;let l="",r="";return 1===s.length?r=s[0]:(l=s[0],r=s.slice(1).join(".")),{topLevelDomain:r,secondLevelDomain:l,domain:a,address:t.join("@")}})(e.toLowerCase());if(!r)return null;if(a&&s){var n,o;let e=null==(n=k(a))?void 0:n.includes(r.secondLevelDomain),t=null==(o=k(s))?void 0:o.includes(r.topLevelDomain);if(e&&t)return null}let i=A(r.domain,t,l,2);if(i)return i===r.domain?null:{address:r.address,domain:i,full:"".concat(r.address,"@").concat(i)};let c=A(r.secondLevelDomain,a,l,2),d=A(r.topLevelDomain,s,l,2);if(r.domain){i=r.domain;let e=!1;if(c&&c!==r.secondLevelDomain&&(i=i.replace(r.secondLevelDomain,c),e=!0),d&&d!==r.topLevelDomain&&""!==r.secondLevelDomain){let t=new RegExp("".concat(r.topLevelDomain,"$"));i=i.replace(t,d),e=!0}if(e)return{address:r.address,domain:i,full:"".concat(r.address,"@").concat(i)}}return null},sift4Distance:W,encodeEmail:e=>encodeURI(e).replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")},C=(0,x.c)("pk_live_51RTrCNIDReRVUvxpiasJbGYllkkZNOyAQvER5vBC3mSYR5ZQKAXAjWGOReuUBBgNFnowt8EeguOaz3qoW9jqsXiG00plYwBJJM");var E=function(e){return e.MAILCHECK_SUGGESTIONS="create_pre_checkout_mailcheck",e}(E||{});let T="voiceGender",q=[{icon:(0,s.jsx)(o.A,{className:"h-8 w-8 text-amber-600"}),title:"Let's start with the basics",desc:"Tell us about the special person in your life",fields:[{label:"Who's this for?",name:"recipientType",type:"radio",options:[{value:"husband",label:"Husband"},{value:"wife",label:"Wife"},{value:"boyfriend",label:"Boyfriend"},{value:"girlfriend",label:"Girlfriend"},{value:"children",label:"Children"},{value:"father",label:"Father"},{value:"mother",label:"Mother"},{value:"sibling",label:"Sibling"},{value:"friend",label:"Friend"},{value:"myself",label:"Myself"},{value:"other",label:"Other"}]},{label:"What's their name?",name:"recipientName",type:"text",placeholder:"Enter their first name",subtext:"Tip: add pronunciation for clarity (e.g. Alicia: ah-lee-sha)"},{label:"What's your relationship to them?",name:"relationshipOther",type:"text",placeholder:"Describe your relationship",showIf:e=>"other"===e["Who's this for?"]}]},{icon:(0,s.jsx)(i.A,{className:"h-8 w-8 text-amber-600"}),title:"Choose a Genre",desc:"Select the musical style for your custom song",fields:[{label:"Preferred Genre",name:"genre",type:"radio",options:[{value:"pop",label:"Pop"},{value:"country",label:"Country"},{value:"rock",label:"Rock"},{value:"rnb",label:"R&B"},{value:"jazz",label:"Jazz"},{value:"worship",label:"Worship"},{value:"rap",label:"Rap / Hip-Hop"}]},{label:"Preferred Voice Gender",name:"voiceGender",type:"radio",options:[{value:"female",label:"Female Voice"},{value:"male",label:"Male Voice"},{value:"none",label:"No Preference"}],subtext:"We recommend choosing your own gender so the vocals feel personal.",showIf:e=>{let t=(e["Who's this for?"]||"").toLowerCase();return"husband"!==t&&"wife"!==t&&"boyfriend"!==t&&"girlfriend"!==t}}]},{icon:(0,s.jsx)(c.A,{className:"h-8 w-8 text-amber-600"}),title:"What makes them special?",desc:"Describe their character and the qualities you love most",fields:[{label:"Their beautiful qualities",name:"personalityTraits",type:"textarea",placeholder:"Are they patient, wise, funny, protective, encouraging? What makes them the incredible person they are?"}]},{icon:(0,s.jsx)(o.A,{className:"h-8 w-8 text-amber-600"}),title:"Share your favorite memories",desc:"What moments with them do you treasure most?",fields:[{label:"Special moments together",name:"favoriteMemories",type:"textarea",placeholder:"Share how you met, special years, inside jokes, or moments that made your relationship unique..."}]},{icon:(0,s.jsx)(d.A,{className:"h-8 w-8 text-amber-600"}),title:"A message from your heart",desc:"Write anything else that you feel would be relevant to include in your song, and we'll do our best to include it!",fields:[{label:"Special message",name:"specialMessage",type:"textarea",placeholder:"What do you want them to know, feel, or remember?"}]},{icon:(0,s.jsx)(d.A,{className:"h-8 w-8 text-amber-600"}),title:"Almost There! Complete Your Order",desc:"Enter your email and pay to complete your order.",fields:[{label:"Your Email Address",name:"email",type:"email",placeholder:"you@email.com"}],isPayment:!0}],D=[{icon:(0,s.jsx)(o.A,{className:"h-8 w-8 text-amber-600"}),title:"Let's start with the basics",desc:"Tell us about yourself",fields:[{label:"Who's this for?",name:"recipientType",type:"radio",options:[{value:"husband",label:"Husband"},{value:"wife",label:"Wife"},{value:"boyfriend",label:"Boyfriend"},{value:"girlfriend",label:"Girlfriend"},{value:"children",label:"Children"},{value:"father",label:"Father"},{value:"mother",label:"Mother"},{value:"sibling",label:"Sibling"},{value:"friend",label:"Friend"},{value:"myself",label:"Myself"},{value:"other",label:"Other"}]},{label:"What's your name?",name:"recipientName",type:"text",placeholder:"Enter your first name",subtext:"Tip: add pronunciation for clarity (e.g. Alicia: ah-lee-sha)"}]},{icon:(0,s.jsx)(i.A,{className:"h-8 w-8 text-amber-600"}),title:"Choose a Genre",desc:"Select the musical style for your custom song",fields:[{label:"Preferred Genre",name:"genre",type:"radio",options:[{value:"pop",label:"Pop"},{value:"country",label:"Country"},{value:"rock",label:"Rock"},{value:"rnb",label:"R&B"},{value:"jazz",label:"Jazz"},{value:"worship",label:"Worship"},{value:"rap",label:"Rap / Hip-Hop"}]},{label:"Preferred Voice Gender",name:"voiceGender",type:"radio",options:[{value:"female",label:"Female Voice"},{value:"male",label:"Male Voice"},{value:"none",label:"No Preference"}],subtext:"We recommend choosing your own gender so the vocals feel personal."}]},{icon:(0,s.jsx)(o.A,{className:"h-8 w-8 text-amber-600"}),title:"Share your heart",desc:"What do you want to convey in your song?",fields:[{label:"What's been on your heart lately?",name:"personalityTraits",type:"textarea",placeholder:"Are you in a waiting season? Facing something heavy? Or has God already brought you through something you want to remember?"}]},{icon:(0,s.jsx)(c.A,{className:"h-8 w-8 text-amber-600"}),title:"Special moments with God",desc:"Do you have any moments and key events where God showed himself in your life?",fields:[{label:"Special moments with God",name:"favoriteMemories",type:"textarea",placeholder:"Has God moved or performed miracles that strengthened your faith? Or were there any challenges you went through? What is your testimony?"}]},{icon:(0,s.jsx)(d.A,{className:"h-8 w-8 text-amber-600"}),title:"What do you want to be reminded of every time you hear this song?",desc:"Imagine playing this song back on a hard day, what do you want it to speak over you?",fields:[{label:"Special message",name:"specialMessage",type:"textarea",placeholder:"Do you need reassurance, hope, peace, trust, identity, or strength? Do you have a testimony? What truth do you want to cling to when everything feels shaky?"}]},{icon:(0,s.jsx)(d.A,{className:"h-8 w-8 text-amber-600"}),title:"Almost There! Complete Your Order",desc:"Enter your email and pay to complete your order.",fields:[{label:"Your Email Address",name:"email",type:"email",placeholder:"you@email.com"}],isPayment:!0}],R=[{icon:(0,s.jsx)(o.A,{className:"h-8 w-8 text-amber-600"}),title:"Let's start with the basics",desc:"Tell us about your child",fields:[{label:"Who's this for?",name:"recipientType",type:"radio",options:[{value:"husband",label:"Husband"},{value:"wife",label:"Wife"},{value:"boyfriend",label:"Boyfriend"},{value:"girlfriend",label:"Girlfriend"},{value:"children",label:"Children"},{value:"father",label:"Father"},{value:"mother",label:"Mother"},{value:"sibling",label:"Sibling"},{value:"friend",label:"Friend"},{value:"myself",label:"Myself"},{value:"other",label:"Other"}]},{label:"What's their name?",name:"recipientName",type:"text",placeholder:"Enter their first name",subtext:"Tip: add pronunciation for clarity (e.g. Alicia: ah-lee-sha)"}]},{icon:(0,s.jsx)(i.A,{className:"h-8 w-8 text-amber-600"}),title:"Choose a Genre",desc:"Select the musical style for your custom song",fields:[{label:"Preferred Genre",name:"genre",type:"radio",options:[{value:"pop",label:"Pop"},{value:"country",label:"Country"},{value:"rock",label:"Rock"},{value:"rnb",label:"R&B"},{value:"jazz",label:"Jazz"},{value:"worship",label:"Worship"},{value:"rap",label:"Rap / Hip-Hop"}]},{label:"Preferred Voice Gender",name:"voiceGender",type:"radio",options:[{value:"female",label:"Female Voice"},{value:"male",label:"Male Voice"},{value:"none",label:"No Preference"}],subtext:"We recommend choosing your own gender so the vocals feel personal."}]},{icon:(0,s.jsx)(c.A,{className:"h-8 w-8 text-amber-600"}),title:"What makes them special?",desc:"Tell us what you love most about them and who they're becoming",fields:[{label:"Their beautiful qualities",name:"personalityTraits",type:"textarea",placeholder:"Are they curious, strong, kind, brave, funny, faith-filled? What about their personality makes your heart so full?"}]},{icon:(0,s.jsx)(o.A,{className:"h-8 w-8 text-amber-600"}),title:"Share your favorite memories",desc:"Think of the moments, big or small, that captures your love for them",fields:[{label:"Special moments together",name:"favoriteMemories",type:"textarea",placeholder:"The first time you held them? Something funny they always say? A milestone moment? A quiet moment that meant everything?"}]},{icon:(0,s.jsx)(d.A,{className:"h-8 w-8 text-amber-600"}),title:"A message from your heart",desc:"Write anything else that you feel would be relevant to include in your song, and we'll do our best to include it!",fields:[{label:"Special message",name:"specialMessage",type:"textarea",placeholder:"What do you pray over them? What does God want them to know? What do you hope they always remember about who they are and how deeply they are loved?"}]},{icon:(0,s.jsx)(d.A,{className:"h-8 w-8 text-amber-600"}),title:"Almost There! Complete Your Order",desc:"Enter your email and pay to complete your order.",fields:[{label:"Your Email Address",name:"email",type:"email",placeholder:"you@email.com"}],isPayment:!0}],O=[{icon:(0,s.jsx)(o.A,{className:"h-8 w-8 text-amber-600"}),title:"Let's start with the basics",desc:"Tell us about the special person in your life",fields:[{label:"Who's this for?",name:"recipientType",type:"radio",options:[{value:"husband",label:"Husband"},{value:"wife",label:"Wife"},{value:"boyfriend",label:"Boyfriend"},{value:"girlfriend",label:"Girlfriend"},{value:"children",label:"Children"},{value:"father",label:"Father"},{value:"mother",label:"Mother"},{value:"sibling",label:"Sibling"},{value:"friend",label:"Friend"},{value:"myself",label:"Myself"},{value:"other",label:"Other"}]},{label:"What's their name?",name:"recipientName",type:"text",placeholder:"Enter their first name",subtext:"Tip: add pronunciation for clarity (e.g. Alicia: ah-lee-sha)"},{label:"What's your relationship to them?",name:"relationshipOther",type:"text",placeholder:"Describe your relationship",showIf:e=>"other"===e["Who's this for?"]}]},{icon:(0,s.jsx)(i.A,{className:"h-8 w-8 text-amber-600"}),title:"Choose a Genre",desc:"Select the musical style for your custom song",fields:[{label:"Preferred Genre",name:"genre",type:"radio",options:[{value:"pop",label:"Pop"},{value:"country",label:"Country"},{value:"rock",label:"Rock"},{value:"rnb",label:"R&B"},{value:"jazz",label:"Jazz"},{value:"worship",label:"Worship"},{value:"rap",label:"Rap / Hip-Hop"}]},{label:"Preferred Voice Gender",name:"voiceGender",type:"radio",options:[{value:"female",label:"Female Voice"},{value:"male",label:"Male Voice"},{value:"none",label:"No Preference"}],subtext:"We recommend choosing your own gender so the vocals feel personal."}]},{icon:(0,s.jsx)(c.A,{className:"h-8 w-8 text-amber-600"}),title:"What makes them special?",desc:"Describe their character and the qualities you love most",fields:[{label:"Their beautiful qualities",name:"personalityTraits",type:"textarea",placeholder:"Are they patient, wise, funny, encouraging, Godly? What makes them an incredible person to you?"}]},{icon:(0,s.jsx)(o.A,{className:"h-8 w-8 text-amber-600"}),title:"Share your favorite memories",desc:"What moments with them do you treasure most?",fields:[{label:"Special moments together",name:"favoriteMemories",type:"textarea",placeholder:"What memories do you always come back to? A moment you laugh about every time? Something you went through together that brought you closer?"}]},{icon:(0,s.jsx)(d.A,{className:"h-8 w-8 text-amber-600"}),title:"A message from your heart",desc:"Write anything else that you feel would be relevant to include in your song, and we'll do our best to include it!",fields:[{label:"Special message",name:"specialMessage",type:"textarea",placeholder:"What do you want them to know, that you've never said enough? What do you want to thank them for? What is that one thing from your heart you want to say to them?"}]},{icon:(0,s.jsx)(d.A,{className:"h-8 w-8 text-amber-600"}),title:"Almost There! Complete Your Order",desc:"Enter your email and pay to complete your order.",fields:[{label:"Your Email Address",name:"email",type:"email",placeholder:"you@email.com"}],isPayment:!0}];function M(){let[e,t]=(0,l.useState)(0),[a,r]=(0,l.useState)({}),[o,c]=(0,l.useState)(!1),[x,k]=(0,l.useState)(!1),[A,W]=(0,l.useState)({hours:23,minutes:59,seconds:59}),[E,M]=(0,l.useState)({}),[I,z]=(0,l.useState)({}),[L,U]=(0,l.useState)(!1),[F,Y]=(0,l.useState)(!1),[$,B]=(0,l.useState)(!1),[H,V]=(0,l.useState)({}),[J,Q]=(0,l.useState)(!0),[Z,K]=(0,l.useState)(!1),[X,ee]=(0,l.useState)(null),[et,ea]=(0,l.useState)({}),[es,el]=(0,l.useState)(null),[er,en]=(0,l.useState)(null),[eo,ei]=(0,l.useState)(!1),[ec,ed]=(0,l.useState)(""),em=(0,l.useRef)(null),eu=(0,l.useRef)(null),eh=(0,l.useRef)(null),ep=(0,l.useRef)(null),ef=e=>{let t=e.trim();return t?P.suggest(P.encodeEmail(t),P.defaultDomains,P.defaultSecondLevelDomains,P.defaultTopLevelDomains,P.sift4Distance):null};(0,g.useRouter)();let eb=(0,g.useSearchParams)(),eg=(0,l.useMemo)(()=>{let e=a["Who's this for?"];return"myself"===e?D:"children"===e?R:"mother"===e||"father"===e||"sibling"===e?O:q},[a["Who's this for?"]]),ex=()=>"myself"===a["Who's this for?"]?a["What's your name?"]||"":a["What's their name?"]||"";(0,l.useEffect)(()=>(c(!1),k(!1),()=>{eh.current&&clearTimeout(eh.current)}),[]),(0,l.useEffect)(()=>{let e=e=>{e.persisted&&(c(!1),k(!1))};return window.addEventListener("pageshow",e),()=>{window.removeEventListener("pageshow",e)}},[]),(0,l.useEffect)(()=>{(async()=>{try{let e=a["Who's this for?"],t="";t="myself"===e?"myself-song-quiz":"children"===e?"children-song-quiz":"mother"===e||"father"===e||"sibling"===e?"family-song-quiz":"friend"===e?"friend-song-quiz":"other"===e?"other-song-quiz":"general-song-quiz";let s=e?"/api/song-pricing?survey_type=".concat(t):"/api/song-pricing",l=await fetch(s);if(l.ok){let e=await l.json();ee(e.pricing),Y("International"===e.pricing.displayRegion)}}catch(e){console.error("Failed to fetch pricing:",e),ee({basePrice:199,salePrice:99,currency:"USD",salePercentage:50,displayRegion:"US"})}})()},[a["Who's this for?"]]),(0,l.useEffect)(()=>{let a=eb.get("canceled"),s=eb.get("survey_id");if(a&&s&&e!==eg.length-1){c(!1),k(!1),t(eg.length-1);try{(0,y.u4)("CheckoutCancelled",{surveyId:s,url:window.location.href,timestamp:Date.now()})}catch(e){console.error("Vercel Analytics failed:",e)}(async()=>{try{let e=await fetch("/api/survey/get?id=".concat(s));if(e.ok){let{formData:t,email:a,survey_id:l}=await e.json(),n={...t};"myself-song-quiz"===l?"Myself"===t["Who's this for?"]&&(n["Who's this for?"]="myself"):"children-song-quiz"===l?"Children"===t["Who's this for?"]&&(n["Who's this for?"]="children"):"family-song-quiz"===l?"Mother"===t["Who's this for?"]?n["Who's this for?"]="mother":"Father"===t["Who's this for?"]?n["Who's this for?"]="father":"Sibling"===t["Who's this for?"]&&(n["Who's this for?"]="sibling"):"friend-song-quiz"===l?"Friend"===t["Who's this for?"]&&(n["Who's this for?"]="friend"):"other-song-quiz"===l?"Other"===t["Who's this for?"]&&(n["Who's this for?"]="other"):"general-song-quiz"===l&&("Husband"===t["Who's this for?"]?n["Who's this for?"]="husband":"Wife"===t["Who's this for?"]?n["Who's this for?"]="wife":"Boyfriend"===t["Who's this for?"]?n["Who's this for?"]="boyfriend":"Girlfriend"===t["Who's this for?"]&&(n["Who's this for?"]="girlfriend")),r(n),c(!1),k(!1),U(!0),(0,y.u4)("SurveyRestored",{surveyId:s,email:a,surveyType:l,url:window.location.href,timestamp:Date.now()})}else console.error("Failed to restore survey data")}catch(e){console.error("Error restoring survey data:",e)}})()}},[eb,e]),(0,l.useEffect)(()=>{let e=setInterval(()=>{W(e=>e.seconds>0?{...e,seconds:e.seconds-1}:e.minutes>0?{...e,minutes:e.minutes-1,seconds:59}:e.hours>0?{hours:e.hours-1,minutes:59,seconds:59}:{hours:0,minutes:0,seconds:0})},1e3);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{try{let e=(navigator.languages&&navigator.languages.length>0?navigator.languages:[navigator.language]).map(e=>String(e).toLowerCase()),t=e.some(e=>/-us$/.test(e)),a=e.some(e=>/-ca$/.test(e)),s=(Intl.DateTimeFormat().resolvedOptions().timeZone||"").toLowerCase(),l=s.startsWith("america/")&&["toronto","vancouver","edmonton","winnipeg","regina","halifax","st_johns","whitehorse","yellowknife","iqaluit","moncton","goose_bay","blanc-sablon","rankin_inlet","resolute","swift_current","atikokan","cambridge_bay","creston","dawson","dawson_creek","fort_nelson","inuvik","pangnirtung","rainy_river","thunder_bay","ottawa","calgary","saskatoon","victoria","montreal","quebec"].some(e=>s.endsWith("/".concat(e))),r=s.startsWith("america/")&&!l,n=a||l||!t||!r;Y(n),n&&(0,y.u4)("international_visitor_detected",{timestamp:new Date().toISOString(),timeZone:s,languages:e.join(",")})}catch(e){Y(!1)}},[]),(0,l.useEffect)(()=>{let e=eb.get("data");if(e)try{r(JSON.parse(e)),t(0)}catch(e){}},[eb]),(0,l.useEffect)(()=>{if(x)return;let t=t=>{var s,l;return(0,y.u4)("Page Exit Attempt",{currentStep:e+1,totalSteps:eg.length,formData:JSON.stringify(a),url:window.location.href,path:window.location.pathname,timestamp:Date.now()}),(0,j.sx)("Survey Step Exit Attempt",{step_number:e+1,step_title:(null==(s=eg[e])?void 0:s.title)||"Unknown Step",total_steps:eg.length,completion_rate:(e+1)/eg.length*100,survey_type:"general",abandonment_reason:"page_exit",fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("Survey Step Exit Attempt",{step_number:e+1,step_title:(null==(l=eg[e])?void 0:l.title)||"Unknown Step",total_steps:eg.length,completion_rate:(e+1)/eg.length*100,survey_type:"general",abandonment_reason:"page_exit",page:"create"}),t.preventDefault(),t.returnValue="Are you sure? Your progress will be lost.","Are you sure? Your progress will be lost."};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[x,e,a]),(0,l.useEffect)(()=>{ed(a["Your Email Address"]||"")},[a["Your Email Address"]]);let ey=(e,t,s)=>{let l=a["Who's this for?"];r(e=>({...e,[s]:t})),"Your Email Address"===s&&(ed(t),er&&t===er?el(null):(eh.current&&clearTimeout(eh.current),eh.current=setTimeout(()=>{er&&t!==er&&en(null);let e=ef(t);e&&e.full!==ep.current&&(ep.current=e.full,(0,y.u4)("mailcheck_suggestion_detected",{original_email:t,suggested_email:e.full,source:"typing"}),(0,N.u)("Mailcheck Suggestion Detected",{original_email:t,suggested_email:e.full,source:"typing",page:"create"})),e||(ep.current=null),el(e)},800))),Object.keys(et).length>0&&ea({}),"Who's this for?"===s&&t!==l&&r(e=>{let t={...e},a=["What's their name?","What's your name?","Who's this for?"];return Object.keys(t).forEach(e=>{a.includes(e)||delete t[e]}),t}),"Who's this for?"===s&&"other"===t&&setTimeout(()=>{let e=document.querySelector('button[type="button"]:not([disabled])');e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)},ev=async e=>{let t;c(!0),k(!0),(0,j.gm)(e,{email:e,fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.I)(e,{email:e,fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")});try{window.ttq&&(0,_.AD)({email:e})}catch(e){}(0,y.u4)("Survey Completed",{email:e,recipientName:ex(),recipientType:a["Who's this for?"]||"",genre:a["Preferred Genre"]||"",totalSteps:eg.length});let s=[];eg.forEach(e=>{e.isPayment||e.fields.forEach(t=>{if("showIf"in t&&"function"==typeof t.showIf&&!t.showIf(a)||"What's your relationship to them?"===t.label&&"other"!==a["Who's this for?"])return;let l=a[t.label]||"";if("Who's this for?"===t.label){let t=e.fields.find(e=>"Who's this for?"===e.label&&Array.isArray(e.options)),a=t&&Array.isArray(t.options)?t.options.find(e=>e.value===l):void 0;l=a?a.label:l}if("radio"===t.type&&Array.isArray(t.options)&&"Who's this for?"!==t.label){let e=t.options.find(e=>e.value===l);l=e?e.label:l}s.push({question:t.label,answer:l})})}),s.push({question:"Your Email Address",answer:e||""});let l=await fetch("/api/survey/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,survey_id:"myself"===a["Who's this for?"]?"myself-song-quiz":"children"===a["Who's this for?"]?"children-song-quiz":"mother"===a["Who's this for?"]||"father"===a["Who's this for?"]||"sibling"===a["Who's this for?"]?"family-song-quiz":"friend"===a["Who's this for?"]?"friend-song-quiz":"other"===a["Who's this for?"]?"other-song-quiz":"general-song-quiz",answers:s,status:"completed"})}),{surveyResponse:r,error:n}=await l.json();if(n||!r){c(!1),console.error("Survey save error:",n),alert("Failed to save survey. Please try again.");return}let o=new URL(window.location.href);o.searchParams.set("survey_id",r.id),o.searchParams.set("canceled","true"),window.history.replaceState({},"",o.toString());try{let e=await fetch("/api/products");if(!e.ok)throw Error("Failed to fetch products");let{products:a}=await e.json();t=a.find(e=>"PS-CUSTOMSONG"===e.sku||"PS-CUSTOMSONG"===e.id)}catch(e){c(!1),alert("Product not found.");return}if(!t){c(!1),alert("Product not found.");return}let i=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,surveyResponseId:r.id,productId:t.id,trackingData:{fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc"),userAgent:window.navigator.userAgent}})});if(!i.ok){c(!1),(0,y.u4)("checkout_session_creation_failed",{email:e,surveyResponseId:r.id,productId:t.id,status:i.status}),(0,N.u)("Checkout Session Creation Failed",{email:e,survey_response_id:r.id,product_id:t.id,status:i.status,page:"create"}),alert("Failed to start payment. Please try again.");return}let{sessionId:d,orderId:m}=await i.json(),u=(0,v.A)(),h=(0,w.R)("_fbp"),p=(0,w.R)("_fbc"),f={content_ids:["PS-CUSTOMSONG"],content_type:"product",contents:[{id:"PS-CUSTOMSONG",quantity:1}],currency:(null==X?void 0:X.currency)||"USD",value:(null==X?void 0:X.salePrice)||99,event_id:u};window.fbq&&window.fbq("track","InitiateCheckout",f),(0,y.u4)("InitiateCheckout",{eventId:u,value:f.value,currency:f.currency,email:e,content_ids:f.content_ids.join(",")});try{(await fetch("/api/events/initiatecheckout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventData:f,url:window.location.href,userAgent:window.navigator.userAgent,eventId:u,fbp:h,fbc:p,referrer:document.referrer||void 0,email:e,surveyResponseId:r.id,orderId:m})})).ok||console.error("Failed to send InitiateCheckout event to CAPI")}catch(e){console.error("Error sending InitiateCheckout event to CAPI:",e)}(0,N.u)("Checkout Started",{order_id:m,affiliation:"Stripe",value:(null==X?void 0:X.salePrice)||49,currency:(null==X?void 0:X.currency)||"USD",products:[{product_id:"PS-CUSTOMSONG",sku:"PS-CUSTOMSONG",category:"custom_songs",name:"Custom Song by PrayerSong",brand:"PrayerSong",price:(null==X?void 0:X.salePrice)||49,quantity:1,position:1,url:window.location.href}],email:e,survey_response_id:r.id});try{window.gtag&&window.gtag("event","conversion",{send_to:"AW-17523259355/bfQqCLbH25UbENvv3qNB"})}catch(e){}try{window.ttq&&(0,_.jG)({content_id:"PS-CUSTOMSONG",content_name:"Custom Song by PrayerSong",brand:"PrayerSong",value:99,currency:"USD",event_id:u})}catch(e){}let b=await C;await b.redirectToCheckout({sessionId:d})},ew=async e=>{e.preventDefault();let t=a["Your Email Address"];if(!t)return alert("Please enter your email address");if(t!==er){let e=ef(t),a=!1;if(!e&&(/.+@.+\..+/.test(t.trim())||(e={address:t.split("@")[0]||t,domain:t.includes("@")?t.split("@")[1]:"",full:t.includes("@")?t:"".concat(t,"@gmail.com")},a=!0,(0,y.u4)("mailcheck_missing_tld_detected",{original_email:t}),(0,N.u)("Mailcheck Missing TLD Detected",{original_email:t,page:"create"}))),e&&(a||e.full!==t)){e.full!==ep.current&&(ep.current=e.full,(0,y.u4)("mailcheck_suggestion_detected",{original_email:t,suggested_email:e.full,source:"submit"}),(0,N.u)("Mailcheck Suggestion Detected",{original_email:t,suggested_email:e.full,source:"submit",page:"create"})),(0,y.u4)("mailcheck_modal_open",{original_email:t,suggested_email:e.full,has_tld:!a}),(0,N.u)("Mailcheck Modal Open",{original_email:t,suggested_email:e.full,has_tld:!a,page:"create"}),el(e),ed(t),ei(!0);return}}await ev(t)},ej=e=>{ei(e),e||ed(a["Your Email Address"]||"")},eN=async()=>{if(o)return;let e=ec.trim();if(!e)return;let t=null==es?void 0:es.full;r(t=>({...t,"Your Email Address":e})),en(e===t?null:e),el(null),ei(!1),t&&e===t&&((0,y.u4)("mailcheck_suggestion_accepted",{original_email:ec,suggested_email:t,method:"modal_continue"}),(0,N.u)("Mailcheck Suggestion Accepted",{original_email:ec,suggested_email:t,method:"modal_continue",page:"create"})),await ev(e)},e_=eg[e],eS="Choose a Genre"===e_.title,ek=e_.fields.some(e=>e.name===T);return e_.isPayment?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 to-white",children:[(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Almost There! Complete Your Order"}),(0,s.jsxs)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto mb-4",children:["You're just one click away from creating a beautiful, personalized song for ",ex()?(0,s.jsx)("span",{className:"font-semibold text-[#b94d23]",children:ex()}):"them","."]}),(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 bg-[#b94d23] text-white text-xs font-medium px-3 py-1 rounded-full",children:["Expected song delivery date: ",(0,s.jsx)("strong",{children:(()=>{let e=new Date;return e.setDate(e.getDate()+7),e.toLocaleDateString("en-US",{month:"short",day:"numeric"})})()})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("form",{onSubmit:ew,className:"bg-white rounded-2xl shadow-lg p-6 flex flex-col gap-6 order-first lg:order-last border border-amber-100",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block font-medium mb-2",children:"Your Email Address"}),(0,s.jsx)("input",{type:"email",className:"w-full border rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-amber-400",value:a["Your Email Address"]||"",onChange:e=>ey("email",e.target.value,"Your Email Address"),placeholder:"you@email.com",required:!0,ref:eu}),es&&es.full!==a["Your Email Address"]&&a["Your Email Address"]!==er&&(0,s.jsx)("div",{className:"mt-2 rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800 flex flex-col gap-2",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold",children:["Did you mean ",(0,s.jsx)("button",{type:"button",className:"underline hover:text-amber-900",onClick:()=>{var e;(0,y.u4)("mailcheck_suggestion_accepted",{original_email:a["Your Email Address"]||"",suggested_email:es.full,method:"inline"}),(0,N.u)("Mailcheck Suggestion Accepted",{original_email:a["Your Email Address"]||"",suggested_email:es.full,method:"inline",page:"create"}),ey("email",es.full,"Your Email Address"),el(null),en(null),null==(e=eu.current)||e.focus()},children:es.full}),"?"]}),(0,s.jsx)("p",{className:"text-xs text-amber-700 mt-1",children:"Please double check to make sure you entered the correct email."})]}),(0,s.jsx)("button",{type:"button",className:"text-amber-700 hover:text-amber-900",onClick:()=>{en(a["Your Email Address"]||null),el(null)},"aria-label":"Dismiss email suggestion",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})]})})]}),(0,s.jsx)("button",{type:"submit",className:"w-full flex items-center justify-center px-6 py-4 rounded-lg bg-[#b94d23] text-white font-dm-sans font-semibold text-lg hover:bg-[#a13f18] transition-colors disabled:opacity-60 shadow-lg",disabled:o,children:o?"Processing...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"h-5 w-5 mr-2"})," Create My Song"]})}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-600 text-sm font-medium mt-0.5",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"30-Day Money Back Guarantee"})]})]}),(0,s.jsxs)("div",{className:"space-y-6 order-last lg:order-first",children:[(0,s.jsxs)("div",{className:"border-2 border-amber-200 rounded-2xl bg-white shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center text-xl font-semibold mb-4",children:[(0,s.jsx)(i.A,{className:"h-5 w-5 mr-2 text-amber-600"})," Your Custom Song Order"]}),(0,s.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Song for:"}),ex()?(0,s.jsx)("span",{className:"font-medium text-[#b94d23]",children:ex()}):(0,s.jsx)("span",{className:"font-medium",children:"them"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Delivery:"}),(0,s.jsx)("span",{className:"font-medium",children:(()=>{let e=new Date;return e.setDate(e.getDate()+7),e.toLocaleDateString("en-US",{month:"short",day:"numeric"})})()})]})]}),(0,s.jsx)("div",{className:"border-t border-amber-100 my-4"}),(0,s.jsxs)("div",{className:"space-y-4",children:[X?F?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"font-playfair text-lg text-gray-900",children:"Custom Song"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"px-2.5 py-0.5 rounded-full border border-amber-300 text-amber-700 text-[11px] font-semibold tracking-widest uppercase bg-white/60",style:{letterSpacing:"0.08em"},children:[X.salePercentage,"% Off"]}),(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsxs)("span",{className:"text-gray-400 line-through text-base font-light",children:["$",X.basePrice]}),(0,s.jsxs)("span",{className:"text-xl font-playfair font-semibold text-amber-700 leading-tight",children:["$",X.salePrice," ",X.currency]})]})]})]}):(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-playfair text-lg text-gray-900",children:"Custom Song"}),(0,s.jsxs)("span",{className:"ml-2 px-2.5 py-0.5 rounded-full border border-amber-300 text-amber-700 text-[11px] font-semibold tracking-widest uppercase bg-white/60",style:{letterSpacing:"0.08em"},children:[X.salePercentage,"% Off"]})]}),(0,s.jsxs)("span",{className:"flex items-end gap-2",children:[(0,s.jsxs)("span",{className:"text-gray-400 line-through text-base font-light",children:["$",X.basePrice]}),(0,s.jsxs)("span",{className:"text-xl font-playfair font-semibold text-amber-700 leading-tight",children:["$",X.salePrice]})]})]}):(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-playfair text-lg text-gray-900",children:"Custom Song"}),(0,s.jsx)("span",{className:"ml-2 px-2.5 py-0.5 rounded-full border border-amber-300 text-amber-700 text-[11px] font-semibold tracking-widest uppercase bg-white/60",style:{letterSpacing:"0.08em"},children:"Loading..."})]}),(0,s.jsxs)("span",{className:"flex items-end gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400 line-through text-base font-light",children:"$199"}),(0,s.jsx)("span",{className:"text-xl font-playfair font-semibold text-amber-700 leading-tight",children:"$99"})]})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{try{let e={recipientType:a["Who's this for?"]||"unknown",url:window.location.href,path:window.location.pathname},t=eb.get("survey_id");t&&(e.surveyId=t),(0,y.u4)("review_edit_survey_open",e);let s={...e,fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")};(0,j.sx)("Review Edit Survey Open",s),(0,N.u)("Review Edit Survey Open",{page:"create"})}catch(e){}V(a),B(!0)},className:"group w-full px-4 py-2.5 bg-amber-50/80 border border-amber-200 rounded-lg text-amber-800 hover:bg-amber-100 hover:border-amber-300 transition shadow-sm flex items-center justify-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 text-amber-700 group-hover:text-amber-800"}),(0,s.jsx)("span",{className:"font-medium",children:"Review or Edit Survey"})]}),!1]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-200 rounded-2xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-3",children:[(0,s.jsx)("span",{className:"text-2xl mr-2",children:"\uD83C\uDF81"}),(0,s.jsx)("h3",{className:"font-semibold text-amber-800",children:"children"===a["Who's this for?"]?"Limited Time Kids Discount":"mother"===a["Who's this for?"]||"father"===a["Who's this for?"]?"Limited Time Offer":"sibling"===a["Who's this for?"]?"Limited Time Sibling Discount":"friend"===a["Who's this for?"]?"Limited Time Friendship Discount":(a["Who's this for?"],"Limited Time Offer")})]}),(0,s.jsx)("div",{className:"space-y-3 text-sm",children:"children"===a["Who's this for?"]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-amber-700",children:["Our songs typically cost ",(0,s.jsxs)("span",{className:"line-through font-medium",children:["$",(null==X?void 0:X.basePrice)||199]}),", but we believe every child deserves to hear God's love in their own special song for just ",(0,s.jsxs)("span",{className:"font-bold text-amber-800",children:["$",(null==X?void 0:X.salePrice)||49,F?" USD":""," for a limited time only"]}),"."]}),(0,s.jsxs)("p",{className:"text-amber-700",children:[(0,s.jsxs)("strong",{children:["Why only $",(null==X?void 0:X.salePrice)||49,F?" USD":"","?"]})," We're passionate about planting seeds in young hearts especially in today's world. When children hear their name in a personalized song about God's love, it creates memories that last a lifetime and helps them understand how precious they are."]})]}):"mother"===a["Who's this for?"]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-amber-700",children:["Our songs typically cost ",(0,s.jsxs)("span",{className:"line-through font-medium",children:["$",(null==X?void 0:X.basePrice)||199]}),", but we believe every mother deserves to be celebrated for just ",(0,s.jsxs)("span",{className:"font-bold text-amber-800",children:["$",(null==X?void 0:X.salePrice)||49,F?" USD":""," for a limited time only"]}),"."]}),(0,s.jsxs)("p",{className:"text-amber-700",children:[(0,s.jsxs)("strong",{children:["Why only $",(null==X?void 0:X.salePrice)||49,F?" USD":"","?"]})," Thanks to generous donations and tips from our amazing customers, we're able to temporarily offer this special price for PrayerSongs made for mothers."]})]}):"father"===a["Who's this for?"]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-amber-700",children:["Our songs typically cost ",(0,s.jsxs)("span",{className:"line-through font-medium",children:["$",(null==X?void 0:X.basePrice)||199]}),", but we believe every father deserves to be honored for just ",(0,s.jsxs)("span",{className:"font-bold text-amber-800",children:["$",(null==X?void 0:X.salePrice)||49,F?" USD":""," for a limited time only"]}),"."]}),(0,s.jsxs)("p",{className:"text-amber-700",children:[(0,s.jsxs)("strong",{children:["Why only $",(null==X?void 0:X.salePrice)||49,F?" USD":"","?"]})," Thanks to generous donations and tips from our amazing customers, we're able to temporarily offer this special price for PrayerSongs made for fathers."]})]}):"sibling"===a["Who's this for?"]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-amber-700",children:["Our songs typically cost ",(0,s.jsxs)("span",{className:"line-through font-medium",children:["$",(null==X?void 0:X.basePrice)||199]}),", but we believe every sibling deserves to be celebrated for just ",(0,s.jsxs)("span",{className:"font-bold text-amber-800",children:["$",(null==X?void 0:X.salePrice)||49,F?" USD":""," for a limited time only"]}),"."]}),(0,s.jsxs)("p",{className:"text-amber-700",children:[(0,s.jsxs)("strong",{children:["Why only $",(null==X?void 0:X.salePrice)||49,F?" USD":"","?"]})," Thanks to generous donations and tips from our amazing customers, we're able to temporarily offer this special price for PrayerSongs made for siblings."]})]}):"friend"===a["Who's this for?"]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-amber-700",children:["Our songs typically cost ",(0,s.jsxs)("span",{className:"line-through font-medium",children:["$",(null==X?void 0:X.basePrice)||199]}),", but we believe every friendship deserves to be celebrated for just ",(0,s.jsxs)("span",{className:"font-bold text-amber-800",children:["$",(null==X?void 0:X.salePrice)||49,F?" USD":""," for a limited time only"]}),"."]}),(0,s.jsxs)("p",{className:"text-amber-700",children:[(0,s.jsxs)("strong",{children:["Why only $",(null==X?void 0:X.salePrice)||49,F?" USD":"","?"]})," Thanks to generous donations and tips from our amazing customers, we're able to temporarily offer this special price for PrayerSongs made for friends."]})]}):"myself"===a["Who's this for?"]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-amber-700",children:["Our songs typically cost ",(0,s.jsxs)("span",{className:"line-through font-medium",children:["$",(null==X?void 0:X.basePrice)||199]}),", but we believe everyone deserves their own PrayerSong just ",(0,s.jsxs)("span",{className:"font-bold text-amber-800",children:["$",(null==X?void 0:X.salePrice)||49,F?" USD":""," for a limited time only"]}),"."]}),(0,s.jsxs)("p",{className:"text-amber-700",children:[(0,s.jsxs)("strong",{children:["Why only $",(null==X?void 0:X.salePrice)||49,F?" USD":"","?"]})," Thanks to generous donations and tips from our amazing customers, we're able to temporarily offer this special price for PrayerSongs made for yourself."]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-amber-700",children:["Our songs typically cost ",(0,s.jsxs)("span",{className:"line-through font-medium",children:["$",(null==X?void 0:X.basePrice)||199]}),", but for a limited time, you can get the same professional quality for just ",(0,s.jsxs)("span",{className:"font-bold text-amber-800",children:["$",(null==X?void 0:X.salePrice)||99,F?" USD":""]}),"."]}),(0,s.jsxs)("p",{className:"text-amber-700",children:[(0,s.jsxs)("strong",{children:["Why only $",(null==X?void 0:X.salePrice)||99,F?" USD":"","?"]})," Thanks to generous donations and tips from our amazing customers, we're able to temporarily offer PrayerSongs at this special price."]})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-4 flex items-center",children:[(0,s.jsx)(i.A,{className:"h-5 w-5 text-amber-500 mr-2"})," Hear Other PrayerSongs We Made"]}),(0,s.jsx)("div",{className:"space-y-4",children:[{song:"https://cdn.prayersong.com/example-songs/sent-to-me-from-god.mp3",songTitle:"Sent to Me from God",name:"Pamela S.",quote:"Absolutely beautiful, you captured such special moments… we both were crying."},{song:"https://cdn.prayersong.com/example-songs/saving-grace.mp3",songTitle:"Saving Grace",name:"Wendy B.",quote:"This is absolutely breathtaking. I can't believe it… I am going to have a hard time keeping this a secret until Sunday."},{song:"https://cdn.prayersong.com/example-songs/stronger-now.mp3",songTitle:"Stronger Now",name:"Markeeta B.",quote:"Very very wonderful song. I absolutely loved it and so did Dave!"}].map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 shadow flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2 w-full",children:[(0,s.jsx)("button",{className:"w-10 h-10 bg-[#b94d23] hover:bg-[#a13f18] text-white rounded-full flex items-center justify-center transition-colors shadow-sm",type:"button","aria-pressed":E[t]?"true":"false",onClick:()=>{let a=document.getElementById("audio-create-".concat(t));a.paused?(Array.from(document.querySelectorAll('audio[id^="audio-create-"]')).forEach((e,t)=>{e!==a&&e.pause()}),a.play(),M(e=>({...Object.keys(e).reduce((e,t)=>({...e,[t]:!1}),{}),[t]:!0})),(0,y.u4)("example_song_play",{songTitle:e.songTitle,songIndex:t,url:window.location.href,path:window.location.pathname,location:"create-page"}),(0,j.sx)("Example Song Played",{song_title:e.songTitle,song_index:t,location:"create_page",page:"create",fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("Example Song Played",{song_title:e.songTitle,song_index:t,location:"create_page",page:"create"})):(a.pause(),M(e=>({...e,[t]:!1})),(0,j.sx)("Example Song Paused",{song_title:e.songTitle,song_index:t,location:"create_page",page:"create",fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("Example Song Paused",{song_title:e.songTitle,song_index:t,location:"create_page",page:"create"}))},children:E[t]?(0,s.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}):(0,s.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.songTitle}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Ordered by ",e.name]})]}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 w-10 text-right",id:"time-create-".concat(t,"-current"),children:I[t]||"0:00"})]}),(0,s.jsx)("audio",{id:"audio-create-".concat(t),preload:"metadata",style:{display:"none"},onLoadedMetadata:e=>{let a=e.target;z(e=>({...e,[t]:G(a.currentTime)}))},onTimeUpdate:e=>{let a=e.target;z(e=>({...e,[t]:G(a.currentTime)}))},onPlay:()=>{M(e=>({...Object.keys(e).reduce((e,t)=>({...e,[t]:!1}),{}),[t]:!0}))},onPause:()=>{M(e=>({...e,[t]:!1}))},onEnded:()=>{M(e=>({...e,[t]:!1})),z(e=>({...e,[t]:"0:00"})),(0,y.u4)("example_song_complete",{songTitle:e.songTitle,songIndex:t,url:window.location.href,path:window.location.pathname,location:"create-page"}),(0,j.sx)("Example Song Completed",{song_title:e.songTitle,song_index:t,location:"create_page",page:"create",fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("Example Song Completed",{song_title:e.songTitle,song_index:t,location:"create_page",page:"create"})},children:(0,s.jsx)("source",{src:e.song,type:"audio/mpeg"})}),(0,s.jsxs)("p",{className:"text-xs text-gray-700 italic mt-2",children:['"',e.quote,'" — ',e.name]})]},t))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-4 flex items-center",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-green-600 mr-2"})," 100% Money Back Guarantee"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Not satisfied? Get a full refund"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"No questions asked, no hassle"})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"30-day guarantee"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Plenty of time to listen and decide"})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Risk-free purchase"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Your satisfaction is our priority"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{(0,y.u4)("scroll_up_button_click",{location:"pre-checkout",action:"scroll_to_email_input",url:window.location.href,path:window.location.pathname,recipientName:ex()||"unknown"});let e=document.querySelector('input[type="email"]');e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{e.focus()},500))},className:"w-full flex items-center justify-center px-6 py-4 rounded-lg bg-[#b94d23] text-white font-dm-sans font-semibold text-lg hover:bg-[#a13f18] transition-colors shadow-lg",children:[(0,s.jsx)(d.A,{className:"h-5 w-5 mr-2"})," Create My Song"]}),(0,s.jsxs)("p",{className:"text-center text-sm text-gray-600 mt-3",children:["Ready to create something special for ",ex()||"your loved one","?"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-4 flex items-center",children:[(0,s.jsx)(d.A,{className:"h-5 w-5 text-amber-500 mr-2"})," What You'll Get"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Radio-Quality Song"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Radio-quality PrayerSong, ready to share"})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Personalized Lyrics"}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["Custom written just for ",ex()||"them"]})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-amber-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"7-Day Delivery"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Perfect for last-minute gifts"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("h3",{className:"font-semibold mb-4 flex items-center",children:[(0,s.jsx)(p.A,{className:"h-5 w-5 text-amber-500 mr-2"})," Why Choose PrayerSong?"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm",children:"Over 1,000 satisfied customers"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm",children:"100% satisfaction guarantee"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm",children:"Secure payment processing"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm",children:"Delivered in just 7 days"})]})]})]})]})]})]}),(0,s.jsx)(S.lG,{open:$,onOpenChange:B,children:(0,s.jsxs)(S.Cf,{className:"w-[95vw] sm:w-full sm:max-w-2xl p-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between px-4 sm:px-6 py-3 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(S.L3,{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Review and Edit Your Survey"}),(0,s.jsx)("div",{className:"mt-0.5 text-xs text-gray-500",children:"Scroll down to see your answers"})]}),(0,s.jsx)("button",{type:"button","aria-label":"Close",className:"p-2 rounded-md hover:bg-gray-100 text-gray-500 hover:text-gray-700",onClick:()=>{try{(0,y.u4)("review_edit_survey_close",{method:"x_button",url:window.location.href,path:window.location.pathname}),(0,j.sx)("Review Edit Survey Close",{method:"x_button",url:window.location.href,path:window.location.pathname,fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("Review Edit Survey Close",{method:"x_button",page:"create"})}catch(e){}B(!1)},children:(0,s.jsx)(m.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{ref:em,onScroll:e=>{let t=e.currentTarget,a=t.scrollTop<=0,s=t.scrollHeight-t.scrollTop-t.clientHeight<=1;Q(a),K(s)},className:"px-4 sm:px-6 py-4 max-h-[70vh] overflow-y-auto",children:(()=>{var e,t;let a=H["Who's this for?"],l="myself"===a?D:"children"===a?R:"mother"===a||"father"===a||"sibling"===a?O:q,r=null==(t=l[0])||null==(e=t.fields)?void 0:e.find(e=>"recipientType"===e.name&&Array.isArray(e.options)),n={...H};if(r){let e=H["Who's this for?"],t=r.options.find(t=>t.value===e||t.label===e);t&&(n["Who's this for?"]=t.value)}return l.filter(e=>!e.isPayment).map((e,t)=>(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-amber-800 mb-2",children:e.title}),(0,s.jsx)("div",{className:"space-y-4",children:e.fields.map(e=>"showIf"in e&&"function"==typeof e.showIf&&!e.showIf(n)?null:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-1",children:e.label}),"text"===e.type&&(0,s.jsx)("input",{type:"text",className:"w-full border border-[#e2cdb2] rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#b94d23] bg-white",value:H[e.label]||"",onChange:t=>V(a=>({...a,[e.label]:t.target.value})),placeholder:e.placeholder}),"textarea"===e.type&&(0,s.jsx)("textarea",{className:"w-full border border-[#e2cdb2] rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#b94d23] min-h-[200px] bg-white",value:H[e.label]||"",onChange:t=>V(a=>({...a,[e.label]:t.target.value})),placeholder:e.placeholder}),"radio"===e.type&&Array.isArray(e.options)&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.options.map(t=>{let a=H[e.label],l=a===t.value||a===t.label;return(0,s.jsxs)("label",{className:"cursor-pointer px-5 py-2 rounded-full border transition text-sm ".concat(l?"bg-[#b94d23] text-white border-[#b94d23]":"bg-white text-gray-900 border-[#e2cdb2] hover:bg-[#f3e7d8]"),children:[(0,s.jsx)("input",{type:"radio",name:"modal-".concat(e.name),value:t.value,checked:l,onChange:()=>V(a=>({...a,[e.label]:t.value})),className:"hidden"}),t.label]},t.value)})})]},e.name))})]},t))})()}),!J&&(0,s.jsx)("div",{className:"pointer-events-none absolute top-0 left-0 right-0 h-6 bg-gradient-to-b from-white to-transparent"}),!Z&&(0,s.jsx)("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-white to-transparent"})]}),(0,s.jsxs)("div",{className:"px-4 sm:px-6 py-3 border-t flex justify-end gap-2",children:[(0,s.jsx)("button",{type:"button",className:"px-4 py-2 rounded-md border border-gray-200 text-gray-700 hover:bg-gray-50",onClick:()=>{try{(0,y.u4)("review_edit_survey_close",{method:"cancel_button",url:window.location.href,path:window.location.pathname}),(0,j.sx)("Review Edit Survey Close",{method:"cancel_button",url:window.location.href,path:window.location.pathname,fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("Review Edit Survey Close",{method:"cancel_button",page:"create"})}catch(e){}B(!1)},children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"px-4 py-2 rounded-md bg-[#b94d23] text-white hover:bg-[#a13f18]",onClick:()=>{try{let e=H["Who's this for?"]||a["Who's this for?"]||"",t=("myself"===e?D:"children"===e?R:"mother"===e||"father"===e||"sibling"===e?O:q).flatMap(e=>e.isPayment?[]:e.fields.map(e=>e.label)),s=0;t.forEach(e=>{(a[e]||"")!==(H[e]||"")&&s++}),(0,y.u4)("review_edit_survey_save",{recipientType:e,changedFields:s,url:window.location.href,path:window.location.pathname}),(0,j.sx)("Review Edit Survey Save",{recipient_type:e,changed_fields:s,url:window.location.href,path:window.location.pathname,fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("Review Edit Survey Save",{recipient_type:e,changed_fields:s,page:"create"})}catch(e){}r(H),B(!1);try{(0,y.u4)("PreCheckout Survey Edited",{url:window.location.href,path:window.location.pathname}),(0,j.sx)("PreCheckout Survey Edited",{url:window.location.href,path:window.location.pathname,fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("PreCheckout Survey Edited",{page:"create"})}catch(e){}},children:"Save"})]})]})}),(0,s.jsx)(S.lG,{open:eo,onOpenChange:ej,children:(0,s.jsxs)(S.Cf,{className:"sm:max-w-md",children:[(0,s.jsx)(S.L3,{className:"text-lg font-semibold text-gray-900",children:"Confirm Your Email"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"We noticed your email might have a typo. Please double check your email before continuing."}),(0,s.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800",htmlFor:"email-confirm-input",children:"Email Address"}),(0,s.jsx)("input",{id:"email-confirm-input",type:"email",className:"w-full border border-[#e2cdb2] rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#b94d23] font-dm-sans text-gray-900 bg-white",value:ec,onChange:e=>ed(e.target.value)}),es&&es.full!==ec.trim()&&(0,s.jsxs)("button",{type:"button",className:"text-sm text-[#b94d23] underline font-medium",onClick:()=>{es&&((0,y.u4)("mailcheck_suggestion_accepted",{original_email:ec,suggested_email:es.full,method:"modal_button"}),(0,N.u)("Mailcheck Suggestion Accepted",{original_email:ec,suggested_email:es.full,method:"modal_button",page:"create"}),ed(es.full))},children:["Use suggested: ",es.full]})]}),(0,s.jsxs)(S.ii,{className:"mt-6 flex justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",className:"px-4 py-2 rounded-md border border-gray-200 text-gray-700 hover:bg-gray-100",onClick:()=>ej(!1),disabled:o,children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"px-4 py-2 rounded-md bg-[#b94d23] text-white hover:bg-[#a13f18] disabled:opacity-60",onClick:eN,disabled:o,children:o?"Processing...":"Continue"})]})]})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 to-white flex flex-col px-4 pt-8 pb-12",children:[(0,s.jsxs)("div",{className:"w-full max-w-xl mx-auto mb-6",children:[(0,s.jsx)("div",{className:"h-1.5 w-full bg-[#f3e7d8] rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-[#b94d23] transition-all duration-300 ease-in-out rounded-full",style:{width:"".concat((e+1)/eg.filter(e=>!e.isPayment).length*100,"%")}})}),(0,s.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600 font-dm-sans",children:["Step ",e+1," of ",eg.filter(e=>!e.isPayment).length]}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 font-dm-sans",children:[Math.round((e+1)/eg.filter(e=>!e.isPayment).length*100),"% Complete"]})]})]}),(0,s.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center",children:(0,s.jsxs)("form",{onSubmit:s=>{s.preventDefault(),e===eg.length-1?ew(s):(()=>{let s=(()=>{let t=eg[e].fields,s={};for(let e of t)(!("showIf"in e)||"function"!=typeof e.showIf||e.showIf(a))&&("Who's this for?"!==e.label&&"Preferred Genre"!==e.label||a[e.label]&&""!==a[e.label].trim()||(s[e.label]=!0));return s})();if(Object.keys(s).length>0)return ea(s);ea({});let l=eg[e].fields.reduce((e,t)=>(e[t.label]=a[t.label]||"",e),{});(0,y.u4)("Survey Step Completed",{stepNumber:e+1,stepTitle:eg[e].title,stepData:JSON.stringify(l)}),(0,j.sx)("Survey Step Completed",{step_number:e+1,step_title:eg[e].title,total_steps:eg.length,completion_rate:(e+1)/eg.length*100,survey_type:"general",step_data:l,fbp:(0,w.R)("_fbp"),fbc:(0,w.R)("_fbc")}),(0,N.u)("Survey Step Completed",{step_number:e+1,step_title:eg[e].title,total_steps:eg.length,completion_rate:(e+1)/eg.length*100,survey_type:"general",page:"create",step_data:l}),e===eg.length-2&&((0,y.u4)("Survey Completed Prior to Email Page",{recipientName:ex(),recipientType:a["Who's this for?"]||"",genre:a["Preferred Genre"]||"",personalityTraits:a["Their beautiful qualities"]||a["What's been on your heart lately?"]||"",favoriteMemories:a["Special moments together"]||a["Special moments with God"]||"",specialMessage:a["Special message"]||"",totalSteps:eg.length-1,url:window.location.href,path:window.location.pathname}),(0,N.u)("Cart Viewed",{recipient_type:a["Who's this for?"]||"unknown",recipient_name:ex()||"unknown",genre:a["Preferred Genre"]||"unknown",page:"create",step:"pre-checkout"})),t(e=>Math.min(e+1,eg.length-1))})()},className:"w-full max-w-xl",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center ".concat(eS&&ek?"mb-4":"mb-10"),children:[(0,s.jsx)("h2",{className:"text-3xl md:text-4xl font-bold mb-2 text-center font-playfair text-gray-900",children:e_.title}),!(eS&&ek)&&(0,s.jsx)("p",{className:"text-base text-gray-900 text-center font-dm-sans -mb-4",children:e_.desc})]}),(0,s.jsx)("div",{className:"".concat(eS&&ek?"space-y-4 mb-4":"space-y-8 mb-6"),children:e_.fields.map(t=>{let l=ek&&t.name===T;return"showIf"in t&&"function"==typeof t.showIf&&!t.showIf(a)?null:(0,s.jsxs)("div",{className:"recipientName"===t.name?"!my-4":"",children:[(0,s.jsxs)("label",{className:"block font-semibold font-playfair text-gray-900 ".concat(l?"":"mb-2"),children:[t.label,("Who's this for?"===t.label||"Preferred Genre"===t.label)&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"}),et[t.label]&&(0,s.jsx)("span",{className:"text-red-500 ml-2 text-sm font-normal",children:"(required)"})]}),"text"===t.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",className:"w-full border border-[#e2cdb2] rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#b94d23] font-dm-sans text-gray-900 bg-white",value:a[t.label]||"",onChange:e=>ey(t.name,e.target.value,t.label),placeholder:t.placeholder,required:"recipientName"===t.name||!(e<=1)}),t.subtext&&(0,s.jsx)("p",{className:"text-xs text-gray-600 font-dm-sans italic ".concat(l?"mb-1":"mt-1"),children:t.subtext})]}),"textarea"===t.type&&(0,s.jsx)("textarea",{className:"w-full border border-[#e2cdb2] rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#b94d23] min-h-[100px] font-dm-sans text-gray-900 bg-white",value:a[t.label]||"",onChange:e=>ey(t.name,e.target.value,t.label),placeholder:t.placeholder,required:!(e<=1)}),"radio"===t.type&&"options"in t&&Array.isArray(t.options)&&"genre"===t.name&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-0.5 font-dm-sans ".concat(et[t.label]?"ring-2 ring-red-300 rounded-lg p-2":""),children:t.options.map(l=>{let r=a[t.label]===l.value;return(0,s.jsxs)("label",{className:"cursor-pointer px-5 py-2 rounded-full border transition font-medium text-base\n                                ".concat(r?"bg-[#b94d23] text-white border-[#b94d23]":"bg-white text-gray-900 border-[#e2cdb2] hover:bg-[#f3e7d8]","\n                                ").concat(et[t.label]?"border-red-300":"","\n                              "),style:{marginBottom:"0.5rem"},children:[(0,s.jsx)("input",{type:"radio",name:t.name,value:l.value,checked:r,onChange:()=>ey(t.name,l.value,t.label),className:"hidden",required:!(e<=1)}),l.label]},l.value)})}),t.subtext&&(0,s.jsx)("p",{className:"text-xs text-gray-600 font-dm-sans italic ".concat(l?"mb-1":"mt-1"),children:t.subtext})]}),"radio"===t.type&&"options"in t&&Array.isArray(t.options)&&"genre"!==t.name&&(0,s.jsxs)(s.Fragment,{children:[t.subtext&&(0,s.jsx)("p",{className:"text-xs text-gray-600 font-dm-sans italic ".concat(l?"mb-1":"mt-1"),children:t.subtext}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-0.5 font-dm-sans ".concat(et[t.label]?"ring-2 ring-red-300 rounded-lg p-2":""),children:t.options.map(l=>{let r=a[t.label]===l.value;return(0,s.jsxs)("label",{className:"cursor-pointer px-5 py-2 rounded-full border transition font-medium text-base\n                                ".concat(r?"bg-[#b94d23] text-white border-[#b94d23]":"bg-white text-gray-900 border-[#e2cdb2] hover:bg-[#f3e7d8]","\n                                ").concat(et[t.label]?"border-red-300":"","\n                              "),style:{marginBottom:"0.5rem"},children:[(0,s.jsx)("input",{type:"radio",name:t.name,value:l.value,checked:r,onChange:()=>ey(t.name,l.value,t.label),className:"hidden",required:!(e<=1)}),l.label]},l.value)})})]})]},t.name)})}),(0,s.jsxs)("div",{className:"flex justify-between items-center ".concat(eS&&ek?"mt-4":"mt-6"),children:[(0,s.jsxs)("button",{type:"button",onClick:()=>t(e=>Math.max(e-1,0)),disabled:0===e,className:"flex items-center px-6 py-3 rounded-lg border border-[#e2cdb2] text-[#b94d23] bg-white hover:bg-[#f3e7d8] font-dm-sans font-medium disabled:opacity-50",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 mr-2"})," Back"]}),e<eg.length-1?(0,s.jsxs)("button",{type:"submit",className:"flex items-center px-6 py-3 rounded-lg bg-[#b94d23] text-white hover:bg-[#a13f18] font-dm-sans font-medium",children:["Next ",(0,s.jsx)(b.A,{className:"h-4 w-4 ml-2"})]}):(0,s.jsxs)("button",{type:"submit",className:"flex items-center px-6 py-3 rounded-lg bg-[#b94d23] text-white hover:bg-[#a13f18] font-dm-sans font-medium",children:["Submit ",(0,s.jsx)(d.A,{className:"h-4 w-4 ml-2"})]})]}),0===e&&(0,s.jsxs)("p",{className:"mt-6 text-center text-xs text-gray-600 font-dm-sans",children:["By continuing, you agree to our"," ",(0,s.jsx)(n(),{href:"/terms",className:"underline hover:text-gray-800",children:"Terms of Service"})," ","and"," ",(0,s.jsx)(n(),{href:"/privacy",className:"underline hover:text-gray-800",children:"Privacy Policy"}),"."]})]})})]})}function G(e){let t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(a.toString().padStart(2,"0"))}function I(){return(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{children:"Loading..."}),children:(0,s.jsx)(M,{})})}}},e=>{e.O(0,[8229,2619,4894,4554,4641,8501,9628,4812,8441,1255,7358],()=>e(e.s=59226)),_N_E=e.O()}]);